{%- assign service_areas = collections.all | where: "data.layout", "page" | where_exp: "item", "item.url contains '/pages/'" | where_exp: "item", "item.inputPath contains '/locations/'" -%}
{%- assign sorted_areas = service_areas | sort: "fileSlug" -%}
{%- for area in sorted_areas -%}
  {%- assign words = area.fileSlug | replace: "-", " " | split: " " -%}
  {%- assign capitalized_words = "" -%}
  {%- for word in words -%}
    {%- assign capitalized_word = word | capitalize -%}
    {%- if forloop.first -%}
      {%- assign capitalized_words = capitalized_word -%}
    {%- else -%}
      {%- assign capitalized_words = capitalized_words | append: " " | append: capitalized_word -%}
    {%- endif -%}
  {%- endfor -%}
  <a href="{{ area.url }}#content">{{ capitalized_words }}</a>{% unless forloop.last %}, {% endunless %}
{%- endfor -%}
